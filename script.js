[FULL script.js CONTENT FROM EARLIER ANSWER]